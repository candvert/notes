- [Qt](#Qt)
	- [å…³é”®æ¦‚å¿µ](#å…³é”®æ¦‚å¿µ)
	- [QStringLiteral](#QStringLiteral)
	- [QStackedWidgetå®ç°å±€éƒ¨ç•Œé¢å˜æ¢](#QStackedWidgetå®ç°å±€éƒ¨ç•Œé¢å˜æ¢)
	- [QSplitteråˆ†éš”å·¦å³æˆ–ä¸Šä¸‹ç•Œé¢](#QSplitteråˆ†éš”å·¦å³æˆ–ä¸Šä¸‹ç•Œé¢)
	- [QScrollAreaåˆ›å»ºå¯ä»¥æ»šåŠ¨çš„åŒºåŸŸ](#QScrollAreaåˆ›å»ºå¯ä»¥æ»šåŠ¨çš„åŒºåŸŸ)
	- [QWidgetçš„constMenuEventå‡½æ•°åˆ›å»ºå³é”®èœå•](#QWidgetçš„constMenuEventå‡½æ•°åˆ›å»ºå³é”®èœå•)
	- [QTreeWidgetå®ç°å±•å¼€æŠ˜å æ•ˆæœ](#QTreeWidgetå®ç°å±•å¼€æŠ˜å æ•ˆæœ)
	- [æ‚¬åœæ˜¾ç¤ºå›¾ç‰‡ç­‰å¤æ‚ä¿¡æ¯](#æ‚¬åœæ˜¾ç¤ºå›¾ç‰‡ç­‰å¤æ‚ä¿¡æ¯)
	- [è®¾ç½®ç•Œé¢å›ºå®šå¤§å°å’Œå»æ‰ç•Œé¢æ ‡é¢˜æ ](#è®¾ç½®ç•Œé¢å›ºå®šå¤§å°å’Œå»æ‰ç•Œé¢æ ‡é¢˜æ )
	- [ä¸‹æ‹‰æ¡†](#ä¸‹æ‹‰æ¡†)
	- [æ›´æ”¹åº”ç”¨æ ‡é¢˜å’Œåº”ç”¨å›¾æ ‡](#æ›´æ”¹åº”ç”¨æ ‡é¢˜å’Œåº”ç”¨å›¾æ ‡)
	- [è®¾ç½®åº”ç”¨çš„ä½œè€…å’Œåº”ç”¨æ˜¾ç¤ºçš„åå­—](#è®¾ç½®åº”ç”¨çš„ä½œè€…å’Œåº”ç”¨æ˜¾ç¤ºçš„åå­—)
	- [è®¾ç½®åº”ç”¨ä¸»é¢˜](#è®¾ç½®åº”ç”¨ä¸»é¢˜)
	- [è®¾ç½®é¼ æ ‡äº‹ä»¶è¿½è¸ª](#è®¾ç½®é¼ æ ‡äº‹ä»¶è¿½è¸ª)
	- [è¿”å›qtå†…ç½®icon](#è¿”å›qtå†…ç½®icon)
	- [è®¾ç½®æ–‡ä»¶](#è®¾ç½®æ–‡ä»¶)
	- [ç³»ç»Ÿæ‰˜ç›˜](#ç³»ç»Ÿæ‰˜ç›˜)
	- [é¢„å®šä¹‰å®](#é¢„å®šä¹‰å®)
	- [æ™ºèƒ½æŒ‡é’ˆ](#æ™ºèƒ½æŒ‡é’ˆ)
	- [å®¹å™¨ç±»](#å®¹å™¨ç±»)
	- [QVariantç±»](#QVariantç±»)
	- [QRandomGeneratorç”Ÿæˆéšæœºæ•°](#QRandomGeneratorç”Ÿæˆéšæœºæ•°)
	- [è·å–å½“å‰æ—¶é—´](#è·å–å½“å‰æ—¶é—´)
	- [QChar](#QChar)
	- [è®¾ç½®äº’æ–¥QAction](#è®¾ç½®äº’æ–¥QAction)
	- [åŠ¨æ€å±æ€§](#åŠ¨æ€å±æ€§)
	- [åˆ›å»ºé»˜è®¤å³é”®èœå•](#åˆ›å»ºé»˜è®¤å³é”®èœå•)
	- [é¼ æ ‡å·¦é”®æ‹–åŠ¨](#é¼ æ ‡å·¦é”®æ‹–åŠ¨)
	- [QStringç”¨æ¥è¡¨ç¤ºc++ä¸­çš„String](#QStringç”¨æ¥è¡¨ç¤ºc++ä¸­çš„String)
	- [qDebug()æ‰“å°æ¶ˆæ¯](#qDebug()æ‰“å°æ¶ˆæ¯)
	- [QWidget](#QWidget)
	- [QObject](#QObject)
	- [ä¿¡å·ä¸æ§½](#ä¿¡å·ä¸æ§½)
	- [connectå’Œdisconnect](#connectå’Œdisconnect)
	- [äº‹ä»¶](#äº‹ä»¶)
	- [è‡ªå®šä¹‰æ§ä»¶](#è‡ªå®šä¹‰æ§ä»¶)
	- [QSS(Qt Style Sheet)](#QSS(Qt Style Sheet))
	- [å¸ƒå±€](#å¸ƒå±€)
	- [Jsonå¤„ç†](#Jsonå¤„ç†)
	- [ç½‘ç»œ](#ç½‘ç»œ)
	- [QFileæ“ä½œæ–‡ä»¶](#QFileæ“ä½œæ–‡ä»¶)
	- [æ•°æ®åº“](#æ•°æ®åº“)
	- [QObjectå®šæ—¶å™¨](#QObjectå®šæ—¶å™¨)
	- [QTimerå®šæ—¶å™¨](#QTimerå®šæ—¶å™¨)
	- [QElapsedTimer](#QElapsedTimer)
	- [QPixmapä¿å­˜å›¾ç‰‡](#QPixmapä¿å­˜å›¾ç‰‡)
	- [QFileDialogæ‰“å¼€èµ„æºç®¡ç†å™¨](#QFileDialogæ‰“å¼€èµ„æºç®¡ç†å™¨)
	- [è®¾ç½®å‘½ä»¤è¡Œè¾“å‡ºçš„æ ¼å¼](#è®¾ç½®å‘½ä»¤è¡Œè¾“å‡ºçš„æ ¼å¼)
	- [QMessageBoxå¯¹è¯æ¡†](#QMessageBoxå¯¹è¯æ¡†)
  
  
  
  
  
	- [QTcpSocket](#QTcpSocket)
	- [QTcpServer](#QTcpServer)
	- [QThreadçº¿ç¨‹](#QThreadçº¿ç¨‹)
	- [QMenuBar](#QMenuBar)
	- [QToolBar](#QToolBar)
	- [QStatusBar](#QStatusBar)
	- [QDockWidget](#QDockWidget)
	- [QDialogå¯¹è¯æ¡†](#QDialogå¯¹è¯æ¡†)
	- [QColorDialog::getColor()](#QColorDialog::getColor())
	- [QFileDialog::getOpenFileName()](#QFileDialog::getOpenFileName())
	- [QFontDialog::getFont()](#QFontDialog::getFont())
	- [QPainterç»˜å›¾](#QPainterç»˜å›¾)
	- [QPen](#QPen)
	- [QBrush](#QBrush)
	- [QPalette](#QPalette)
	- [QFileInfo](#QFileInfo)
	- [QFont](#QFont)
	- [QPlainTextEdit](#QPlainTextEdit)
	- [QProgressBar](#QProgressBar)
	- [QSlider](#QSlider)
	- [QButtonGroupç”¨äºå•é€‰æŒ‰é’®](#QButtonGroupç”¨äºå•é€‰æŒ‰é’®)
	- [QComboBox](#QComboBox)
	- [QTimeEdit](#QTimeEdit)
	- [QDateEdit](#QDateEdit)
	- [QDateTimeEdit](#QDateTimeEdit)
	- [æ‰“åŒ…æˆexe](#æ‰“åŒ…æˆexe)

# Qt
## å…³é”®æ¦‚å¿µ
```cpp
// 1. å¯¹è±¡æ ‘
// å½“ä¸€ä¸ªæ§ä»¶åˆ é™¤æ—¶ï¼Œå®ƒåŒ…å«çš„æ‰€æœ‰å­æ§ä»¶è¢«åˆ é™¤

// 2. ä¿¡å·ä¸æ§½
// ä½¿ç”¨ä¿¡å·ä¸æ§½å¿…é¡»æ˜¯QObjectçš„å­ç±»å¹¶åœ¨ç±»å®šä¹‰æ—¶åŒ…å«Q_OBJECTå®
// ä½¿ç”¨connectå‡½æ•°è¿æ¥ä¿¡å·å’Œæ§½ï¼Œä½¿ç”¨disconnectå‡½æ•°è§£é™¤è¿æ¥
// ä½¿ç”¨qOverloadæ˜ç¡®å‚æ•°ç±»å‹
connect(ui->checkBox, &QCheckBox::clicked, this, qOverload<bool>(&Widget::do_click));
// 3. qobject_cast<>è¿›è¡ŒåŠ¨æ€ç±»å‹è½¬æ¢
// ä½¿ç”¨sender()å‡½æ•°è·å–ä¿¡å·å‘å°„è€…
QPushButton *btn = qobject_cast<QPushButton*>(sender());

// QMetaObject::propertyCount()è¿”å›å…ƒå¯¹è±¡æè¿°çš„ç±»ä¸­å®šä¹‰çš„å±æ€§ä¸ªæ•°ï¼Œä½†æ˜¯å…¶ä¸­ä¸åŒ…æ‹¬å¯¹è±¡çš„åŠ¨æ€å±æ€§
```
## QStringLiteral
```cpp
// è¿™æ ·éœ€è¦åœ¨è¿è¡Œæ—¶åˆ†é…å†…å­˜
this->setWindowIcon(QIcon(":/background-1.png"));

// è¿™æ ·åœ¨ç¼–è¯‘æ—¶å°±åˆ†é…äº†å†…å­˜ï¼Œå¯ä»¥æé«˜æ•ˆç‡
this->setWindowIcon(QIcon(QStringLiteral(":/background-1.png"));
```
## QStackedWidgetå®ç°å±€éƒ¨ç•Œé¢å˜æ¢
```cpp
// æœ€å¥½å°†QStackWidgetæ”¾åœ¨ä¸€ä¸ªå¸ƒå±€é‡Œï¼Œä¸ç„¶å†…å®¹ä¼šæ˜¾ç¤ºä¸å…¨
QStackedWidget *s = new QStackedWidget();
s->addWidget(widget);

s->count();
s->currentIndex();
s->currentWidget();
s->setCurrentIndex(0);
s->setCurrentWidget(widget);
```
## QSplitteråˆ†éš”å·¦å³æˆ–ä¸Šä¸‹ç•Œé¢
```cpp
// QSplitterå¯ä»¥åˆ†éš”ä»»ä½•æ•°é‡çš„æ§ä»¶
QSplitter *splitter = new QSplitter(Qt::Horizontal); // æ°´å¹³åˆ†éš”
splitter->addWidget(leftWidget);
splitter->addWidget(rightWidget);

// setStretchFactor(int index, int stretch)å‡½æ•°å¯ä»¥è®¾ç½®æ‹‰ä¼¸å› å­
splitter->setStretchFactor(0, 1);
splitter->setStretchFactor(1, 2);

leftWidget->setMinimumWidth(100);
rightWidget->setMinimumWidth(100);

// setCollapsible(int index, bool)å‡½æ•°å¯ä»¥ä½¿ä¸è®ºå¦‚ä½•æ‹–åŠ¨åˆ†éš”æ¡éƒ½ä¸ä¼šè®©æ§ä»¶æ¶ˆå¤±ï¼Œå¦‚æœä¸è®¾ç½®åˆ™æ§ä»¶å¯èƒ½éšåˆ†å‰²æ¡çš„æ‹–åŠ¨è€Œæ¶ˆå¤±
splitter->setCollapsible(0, false);
splitter->setCollapsible(1, false);

// setHandleWidth(int)å‡½æ•°è®¾ç½®åˆ†å‰²æ¡çš„å®½åº¦
splitter->setHandleWidth(20);
```
## QScrollAreaåˆ›å»ºå¯ä»¥æ»šåŠ¨çš„åŒºåŸŸ
```cpp
QScrollArea *scroll = new QScrollArea(this);
// å…³é—­æ°´å¹³æ»šåŠ¨æ¡
// å‚æ•°æœ‰ä¸‰ä¸ªå€¼ï¼ŒQt::ScrollBarAlwaysOffã€Qt::ScrollBarAlwaysOnã€Qt::ScrollBarAsNeeded
scrollArea->setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);

// qssç¾åŒ–
// QScrollBar:vertical { background: lightgray; }æ˜¯å¿…é¡»çš„ï¼Œä¸ç„¶åé¢çš„æ ·å¼ä¸ä¼šç”Ÿæ•ˆ
QScrollBar:vertical {
    background: lightgray; /* èƒŒæ™¯è‰²ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ */
    width: 10px; /* æ»šåŠ¨æ¡çš„å®½åº¦ */
}

QScrollBar::handle:vertical {
    background: darkgray; /* æ»šåŠ¨æ¡çš„æ»‘å—é¢œè‰² */
}

QScrollBar::handle:vertical:hover {
    background: gray; /* é¼ æ ‡æ‚¬åœæ—¶çš„æ»‘å—é¢œè‰² */
}

QScrollBar::add-line:vertical,
QScrollBar::sub-line:vertical {
    background: none; /* å»æ‰ä¸Šä¸‹ç®­å¤´çš„èƒŒæ™¯ */
}

QScrollBar::sub-page:vertical {
    background: red; /* å»æ‰ä¸Šä¸‹é¡µçš„èƒŒæ™¯ */
}

QScrollBar::add-page:vertical {
    background: blue; /* å»æ‰ä¸Šä¸‹é¡µçš„èƒŒæ™¯ */
}
```

ç”¨ä¸Šé¢çš„qssåçš„æ ·å¼

![ç”¨ä¸Šé¢çš„qssåçš„æ ·å¼](/images/qt_1.png)
## QWidgetçš„constMenuEventå‡½æ•°åˆ›å»ºå³é”®èœå•
```cpp
void contextMenuEvent(QContextMenuEvent *event) override {
	QMenu menu(this);
        
	// æ·»åŠ èœå•é¡¹
	QAction *addSongAction = menu.addAction("åŠ å…¥æ­Œæ›²");
	QAction *removeSongAction = menu.addAction("ä»æ­Œå•ä¸­åˆ é™¤");
	QAction *viewPlaylistAction = menu.addAction("æŸ¥çœ‹æ’­æ”¾åˆ—è¡¨");
	menu.addSeparator(); // æ·»åŠ åˆ†éš”çº¿
	QAction *shareAction = menu.addAction("åˆ†äº«");

	// è¿æ¥ä¿¡å·å’Œæ§½
	connect(addSongAction, &QAction::triggered, this, &MainWindow::addSong);
	connect(removeSongAction, &QAction::triggered, this, &MainWindow::removeSong);
	connect(viewPlaylistAction, &QAction::triggered, this, &MainWindow::viewPlaylist);
	connect(shareAction, &QAction::triggered, this, &MainWindow::share);

	// æ˜¾ç¤ºèœå•
	menu.exec(event->globalPos());
}
```
## QTreeWidgetå®ç°å±•å¼€æŠ˜å æ•ˆæœ
```cpp
// åˆ›å»º QTreeWidget
QTreeWidget treeWidget;
treeWidget.setHeaderHidden(true); // éšè—è¡¨å¤´

// æ·»åŠ çˆ¶èŠ‚ç‚¹ "Top Artists"
QTreeWidgetItem *topArtists = new QTreeWidgetItem(&treeWidget);
topArtists->setText(0, "Top Artists");

// æ·»åŠ å­èŠ‚ç‚¹
QStringList artists = { "Candy_Wind", "Pianoboyé«˜è‡³è±ª", "The Chainsmokers", "å››å­£éŸ³è‰²", "é—«ä¸œç‚œ", "å‘¨æ°ä¼¦" };
for (const QString &artist : artists) {
    QTreeWidgetItem *item = new QTreeWidgetItem(topArtists);
    item->setText(0, artist);
}

// å±•å¼€çˆ¶èŠ‚ç‚¹ï¼ˆé»˜è®¤æ˜¾ç¤ºä¸ºå±•å¼€çŠ¶æ€ï¼‰
topArtists->setExpanded(true);

// ç¾åŒ–æ ‘æ§ä»¶çš„æ ·å¼ï¼ˆå¯é€‰ï¼‰
treeWidget.setStyleSheet(
    "QTreeView::branch:closed:has-children {"
    "    image: url(:/icons/arrow_right.png); /* å…³é—­çŠ¶æ€çš„å›¾æ ‡ */"
    "}"
    "QTreeView::branch:open:has-children {"
    "    image: url(:/icons/arrow_down.png); /* æ‰“å¼€çŠ¶æ€çš„å›¾æ ‡ */"
    "}"
    "QTreeWidget::item {"
    "    font-size: 14px;"
    "    padding: 5px;"
    "}"
    );

// è®¾ç½®çª—å£å¤§å°
treeWidget.setWindowTitle("Top Artists");
treeWidget.resize(300, 200);
treeWidget.show();
```
## æ‚¬åœæ˜¾ç¤ºå›¾ç‰‡ç­‰å¤æ‚ä¿¡æ¯
```cpp
#include <QApplication>
#include <QListWidget>
#include <QLabel>
#include <QVBoxLayout>
#include <QWidget>
#include <QEvent>
#include <QHelpEvent>
#include <QPoint>

class HoverInfo : public QWidget {
public:
    HoverInfo(QWidget *parent = nullptr) : QWidget(parent) {
        setWindowFlags(Qt::ToolTip); // è®©çª—å£è¡¨ç°ä¸ºå·¥å…·æç¤º

        QVBoxLayout *layout = new QVBoxLayout(this);

        // æ·»åŠ å›¾ç‰‡å’Œæ–‡æœ¬
        QLabel *imageLabel = new QLabel;
        imageLabel->setPixmap(QPixmap(":/images/album_cover.png").scaled(50, 50));
        QLabel *textLabel = new QLabel("ğŸµ happy\nğŸ‘¤ duheyu");

        layout->addWidget(imageLabel);
        layout->addWidget(textLabel);
    }
};

class CustomListWidget : public QListWidget {
public:
    CustomListWidget(QWidget *parent = nullptr) : QListWidget(parent) {
        hoverWidget = new HoverInfo(this);
        hoverWidget->hide();
    }

protected:
    bool event(QEvent *event) override {
        if (event->type() == QEvent::ToolTip) {
            QHelpEvent *helpEvent = static_cast<QHelpEvent *>(event);
            QListWidgetItem *item = itemAt(helpEvent->pos());
            if (item && item->text() == "happy") {
                hoverWidget->move(helpEvent->globalPos() + QPoint(10, 10));
                hoverWidget->show();
            } else {
                hoverWidget->hide();
            }
            return true;
        }
        return QListWidget::event(event);
    }

private:
    HoverInfo *hoverWidget;
};

int main(int argc, char *argv[]) {
    QApplication app(argc, argv);

    // è‡ªå®šä¹‰ QListWidget
    CustomListWidget listWidget;
    listWidget.setWindowTitle("Custom Hover Example");
    listWidget.resize(300, 200);

    // æ·»åŠ åˆ—è¡¨é¡¹
    listWidget.addItem("happy");
    listWidget.addItem("new one");
    listWidget.addItem("Instant fade");
    listWidget.addItem("æˆ‘å–œæ¬¢");
    listWidget.addItem("æ—¥è¯­æ­Œ");

    listWidget.show();
    return app.exec();
}
```
## è®¾ç½®ç•Œé¢å›ºå®šå¤§å°å’Œå»æ‰ç•Œé¢æ ‡é¢˜æ 
```cpp
// è®¾ç½®ç•Œé¢å›ºå®šå¤§å°
this->setFixedSize(width, height);
this->setFixedSize(QSize(width, height));

// å»æ‰ç•Œé¢æ ‡é¢˜æ 
this->setWindowFlag(Qt::FramelessWindowHint);
```
## ä¸‹æ‹‰æ¡†
```cpp
comboBox = new QComboBox;
// è·å¾—å½“å‰index
comboBox->currentIndex();
// æ·»åŠ item
void QComboBox::addItem(const QIcon &icon, const QString &text, const QVariant &userData = QVariant());
// è·å¾—å½“å‰itemçš„data
QVariant QComboBox::itemData(int index, int role = Qt::UserRole) const;
```
## æ›´æ”¹åº”ç”¨æ ‡é¢˜å’Œåº”ç”¨å›¾æ ‡
```cpp
// æ›´æ”¹åº”ç”¨æ ‡é¢˜
this->setWindowTitle("cc");

// æ›´æ”¹åº”ç”¨å›¾æ ‡
this->setWindowIcon(QIcon(":/background-1.png"));
```
## è®¾ç½®åº”ç”¨çš„ä½œè€…å’Œåº”ç”¨æ˜¾ç¤ºçš„åå­—
```cpp
// è®¾ç½®åº”ç”¨çš„ä½œè€…
QCoreApplication::setOrganizationName("NotepadNext");

// è®¾ç½®åº”ç”¨æ˜¾ç¤ºçš„åå­—
QGuiApplication::setApplicationDisplayName("Notepad Next");

// 
QCoreApplication::setApplicationName(QStringLiteral("Zeal"));
QCoreApplication::setApplicationVersion(ZEAL_VERSION);
QCoreApplication::setOrganizationDomain(QStringLiteral("zealdocs.org"));
QCoreApplication::setOrganizationName(QStringLiteral("Zeal"));
```
## è¾“å‡ºæ“ä½œç³»ç»Ÿå’Œç‰ˆæœ¬å·
```cpp
// è¾“å‡ºä¾‹å¦‚"Windows 11 Version 23H2"
QSysInfo::prettyProductName();	// è¿”å›QString
```
## è®¾ç½®åº”ç”¨ä¸»é¢˜
```cpp
// åº”ç”¨ä¸­çš„æ‰€æœ‰æ§ä»¶éƒ½ä¸ºé»‘è‰²
QApplication app(argc, argv);
app.setPalette(QPalette(QColor("#000000")));
```
## è®¾ç½®é¼ æ ‡äº‹ä»¶è¿½è¸ª
```cpp
// å¦‚æœä¸è®¾ç½®ï¼Œåˆ™æ§ä»¶åªä¼šæ”¶åˆ°è‡³å°‘æŒ‰ä¸‹ä¸€ä¸ªé”®å¹¶ç§»åŠ¨é¼ æ ‡çš„äº‹ä»¶ï¼Œè®¾ç½®åæ²¡æœ‰æŒ‰é”®æŒ‰ä¸‹ä¹Ÿä¼šæ”¶åˆ°äº‹ä»¶
this->setMouseTracking(true);
```
## è¿”å›qtå†…ç½®icon
```cpp
// style()æ˜¯QWidgetçš„ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›QStyleï¼Œä¸‹é¢ä»£ç è¿”å›QIcon
style()->standardIcon(QStyle::SP_MessageBoxInformation);
```
## è®¾ç½®æ–‡ä»¶
```cpp
// è®¾ç½®é»˜è®¤çš„é…ç½®æ–‡ä»¶æ ¼å¼ä¸º INI æ ¼å¼
QSettings::setDefaultFormat(QSettings::IniFormat);

// iniæ–‡ä»¶æ ¼å¼
[General]
username=admin
password=1234

// åˆ›å»º QSettings å¯¹è±¡ï¼Œè¯»å–æˆ–å†™å…¥é…ç½®
// è¿™æ®µä»£ç ä¼šåˆ›å»ºä¸€ä¸ªåä¸º config.ini çš„æ–‡ä»¶ï¼Œå¹¶ä¸”å°† username å­˜å‚¨åœ¨ General éƒ¨åˆ†ä¸‹
QSettings settings("config.ini", QSettings::IniFormat);
settings.setValue("General/username", "admin");
```
## ç³»ç»Ÿæ‰˜ç›˜
```cpp
QSystemTrayIcon::isSystemTrayAvailable();	// ç³»ç»Ÿæ‰˜ç›˜æ˜¯å¦å¯ç”¨
QApplication::setQuitOnLastWindowClosed(false);		// è®¾ç½®çª—å£éƒ½å…³é—­ååº”ç”¨åœ¨åå°è¿è¡Œ
trayIcon = new QSystemTrayIcon(this);
trayIcon->setContextMenu(trayIconMenu);				// è®¾ç½®æ‰˜ç›˜å³å‡»åæ˜¾ç¤ºçš„èœå•
trayIcon->showMessage("title", "message", icon, 1000);	// åœ¨æ¡Œé¢å³ä¸‹è§’å¼¹å‡ºç³»ç»Ÿæ¶ˆæ¯ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºå›¾æ ‡ï¼Œç¬¬å››ä¸ªä¸ºæ—¶é—´
QSystemTrayIcon::setVisible(false);		// éšè—ç³»ç»Ÿæ‰˜ç›˜
trayIcon->setIcon(icon);		// è®¾ç½®æ‰˜ç›˜å›¾æ ‡
trayIcon->setToolTip("hello");	// è®¾ç½®æ‰˜ç›˜å›¾æ ‡çš„toolTip

// å½“å·¦é”®æˆ–ä¸­é”®å•å‡»æ‰˜ç›˜å›¾æ ‡ï¼Œåˆ™ä¼šè§¦å‘QSystemTrayIcon::activated
connect(trayIcon, &QSystemTrayIcon::activated, this, &Window::iconActivated);
void Window::iconActivated(QSystemTrayIcon::ActivationReason reason)
{
    switch (reason) {
        case QSystemTrayIcon::Trigger:
            trayIcon->setIcon(icon);
            break;
    }
}

// ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡ï¼Œæœ‰å››ç§
enum MessageIcon { NoIcon, Information, Warning, Critical };
QSystemTrayIcon::MessageIcon(1)
```
## é¢„å®šä¹‰å®
```cpp
// å‘½ä»¤è¡Œè¾“å‡ºå½“å‰å‡½æ•°çš„å£°æ˜
qInfo(Q_FUNC_INFO);
```
## æ™ºèƒ½æŒ‡é’ˆ
```cpp
QScopedPointer<QPushButton> qapp(new QPushButton("hello"));
```
## å®¹å™¨ç±»
```cpp
// é¡ºåºå®¹å™¨ç±»æœ‰QListã€QVectorã€QStackã€QQueue
// åœ¨Qt6ä¸­QVectoræ˜¯QListçš„åˆ«åï¼ŒQListåº•å±‚å’Œc++çš„vectorç›¸ä¼¼ï¼ŒQStackå’ŒQQueueæ˜¯QListçš„å­ç±»
// å¯ä»¥ä½¿ç”¨<<è¿ç®—ç¬¦æˆ–appendå‡½æ•°å‘åˆ—è¡¨æ·»åŠ æ•°æ®
QList<QString> list;
list << "hello";
list.append("world");

// å…³è”å®¹å™¨ç±»QSetã€QMapã€QMultiMapã€QHashã€QMultiHash
```
## QVariantç±»
```cpp
QFont font;
QVariant var = font;						// èµ‹å€¼ç»™ä¸€ä¸ªQVariantå˜é‡
// ä½¿ç”¨setValueç»™QVariantç±»å‹å˜é‡èµ‹å€¼
// var.setValue(QFont());
QFont font2 = var.value<QFont>();			// è½¬æ¢ä¸ºQFontç±»å‹
```
## QRandomGeneratorç”Ÿæˆéšæœºæ•°
## è·å–å½“å‰æ—¶é—´
```cpp
QDateTime::currentDateTime();
```
## QChar
```cpp
// QCharä½¿ç”¨çš„æ˜¯UTF-16ç¼–ç ï¼Œä¸€ä¸ªå­—ç¬¦åŒ…å«2å­—èŠ‚æ•°æ®
// QStringå­˜å‚¨çš„æ˜¯QCharç±»å‹
```
## è®¾ç½®äº’æ–¥QAction
```cpp
QActionGroup *actionGroup = new QActionGroup(this);
actionGroup->addAction(ui->action1);
actionGroup->addAction(ui->action2);
actionGroup->setExclusive(true);
```
## åŠ¨æ€å±æ€§
```cpp
// å‡½æ•°QObject::setProperty()è®¾ç½®å±æ€§å€¼æ—¶ï¼Œå¦‚æœå±æ€§åç§°ä¸å­˜åœ¨ï¼Œå°±ä¼šä¸ºå¯¹è±¡å®šä¹‰ä¸€ä¸ªæ–°çš„å±æ€§å¹¶è®¾ç½®å±æ€§å€¼ï¼Œè¿™æ—¶å®šä¹‰çš„å±æ€§ç§°ä¸ºåŠ¨
// æ€å±æ€§
Q_CLASSINFO("author", "ano")
Q_PROPERTY(int age READ age WRITE setAge NOTIFY ageChanged)
Q_PROPERTY(int score MEMBER m_score)
    
// const QMetaObject *meta=obj->metaObject();
// meta->propertyOffset();
// meta->propertyCount();
// meta->property(i).name();
// obj->property(propName).toString();
// meta->classInfoOffset();
// meta->classInfoCount();
// QMetaClassInfo classInfo=meta->classInfo(i);
// classInfo.name();
// classInfo.value();
```
## åˆ›å»ºé»˜è®¤å³é”®èœå•
```cpp
// åˆ›å»ºæœ‰å¤åˆ¶ç²˜è´´çš„åŠŸèƒ½çš„èœå•ï¼Œåœ¨QLineEditã€QTextEditå’ŒQPlainTextEditç­‰å¯ä»¥è¾“å…¥æ–‡å­—çš„æ§ä»¶ä¸Šç”Ÿæ•ˆ
this->createPopupMenu();
```
## é¼ æ ‡å·¦é”®æ‹–åŠ¨
```cpp
// é‡å†™mousePressEventã€mouseMoveEventã€mouseReleaseEventä¸‰ç§äº‹ä»¶
void Widget::mousePressEvent(QMouseEvent *event)
{
    if (event->button() == Qt::LeftButton)
    {
        mousePress = true;
    }
    movePoint = event->globalPos()->pos();
}
void Widget::mouseMoveEvent(QMouseEvent *event)
{
    if (mousePress)
    {
        QPoint movepos = event->globalPos();
        move(movepos - movePoint);
    }
}
void Widget::mouseMoveEvent(QMouseEvent *event)
{
    Q_UNUSED(event)
    mousePress = false;
}
```
## QStringç”¨æ¥è¡¨ç¤ºc++ä¸­çš„String
```cpp
QString s = "hello";
// å°†æ•´æ•°ç±»å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²
QString::number(235);
// æ ¼å¼åŒ–å­—ç¬¦ä¸²
QString("%1,%2").arg(23).arg("ok");
QString::asprintf("value=%i", value);
```
## qDebug()æ‰“å°æ¶ˆæ¯
```cpp
qDebug() << "hello";
// å¯ä»¥ç›´æ¥æ‰“å°QObjectå¯¹è±¡
QWidget widget;
qDebug() << widget;
```
## QWidget
```cpp
// è°ƒæ•´çª—å£å¤§å°
void resize(const QSize&);
void resize(int w, int h);
// è®¾ç½®å›ºå®šçª—å£å¤§å°
void setFixedSize(const QSize &s);
void setFixedSize(int w, int h);
// è®¾ç½®widgetç›¸å¯¹äºå…¶parentçš„ä½ç½®
void setGeometry(const QRect &);
void setGeometry(int x, int y, int w, int h);
// å°†çª—å£ç§»åˆ°æŸä¸ªåæ ‡
void move(const QSize &);
void move(int x, int y);
```
## QObject
```cpp
QObject* parent() const;
QString objectName() const;
void setParent(QObject* parent);
void setObjectName(const QString &name);
connect();
disconnect();
// å¯åŠ¨å®šæ—¶å™¨ï¼Œè¿”å›ä¸€ä¸ªid
int startTimer(int interval, Qt::TimerType timerType = Qt::CoarseTimer);
int startTimer(std::chrono::milliseconds interval, Qt::TimerType timerType = Qt::CoarseTimer);
// å…³é—­å®šæ—¶å™¨
void killTimer(int id);
// äº‹ä»¶
virtual bool event(QEvent *e);
virtual bool eventFilter(QObject *watched, QEvent *event);
protected:
	virtual void timerEvent(QTimerEvent *event);
```
## ä¿¡å·ä¸æ§½
```cpp
// ä¿¡å·å¯ä»¥è¿æ¥åˆ°æ§½ï¼Œä¹Ÿå¯ä»¥è¿æ¥åˆ°ä¿¡å·
// ä¿¡å·ä¸æ§½å¯ä»¥ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€ï¼Œå¤šå¯¹å¤š
// ä¿¡å·çš„å‚æ•°ä¸ªæ•°ä¸èƒ½å°‘äºæ§½å‡½æ•°çš„å‚æ•°ä¸ªæ•°
// åªæœ‰å½“ä¿¡å·å…³è”çš„æ‰€æœ‰æ§½å‡½æ•°è¿è¡Œå®Œæ¯•åï¼Œæ‰è¿è¡Œå‘å°„ä¿¡å·å¤„åé¢çš„ä»£ç ï¼Œæ¯”å¦‚emitåçš„ä»£ç 

// è‡ªå®šä¹‰ä¿¡å·
signal:
	void hide(int n);		// è¿”å›å€¼æ˜¯voidã€‚åªéœ€å£°æ˜ï¼Œæ— éœ€å®ç°ã€‚å¯ä»¥æœ‰å‚æ•°ï¼Œå¯ä»¥é‡è½½


// æ§½å‡½æ•°
// å¯ä»¥å†™åœ¨publicã€protectedã€privateä¸‹
// è¿”å›å€¼æ˜¯voidï¼Œå¯ä»¥æœ‰å‚æ•°ï¼Œå¯ä»¥é‡è½½
private slots:
	void slotHide();

// ä½¿ç”¨emitå…³é”®å­—é‡Šæ”¾ä¿¡å·
connect(ui->LineEdit, &Widget::hide, &Widget::slotHide);
emit hide(5);

// åœ¨æ§½å‡½æ•°é‡Œå¯ä»¥è°ƒç”¨sender()å‡½æ•°ï¼Œè¿”å›å‘å‡ºä¿¡å·çš„QObject
QObject *QObject::sender() const;
```
## connectå’Œdisconnect
```cpp
// ä¸è¦è¿æ¥å¤šæ¬¡ï¼Œæœ€å¥½åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨ï¼Œä¿è¯åªè¿æ¥ä¸€æ¬¡
// ç¤ºä¾‹ï¼Œè¿”å›å€¼æ˜¯QMetaObject::Connectionï¼Œå¯ä»¥ç”¨äºè°ƒç”¨åç»­çš„disconnectå‡½æ•°
connect(ui->LineEdit, &QPushButton::clicked, this, &Widget::on_cancelButton_clicked);
connect(ui->LineEdit, &QPushButton::clicked, &Widget::on_cancelButton_clicked);
connect(ui->LineEdit, &QPushButton::clicked, [this](){  });
connect(ui->LineEdit, SIGNAL(returnPressed(int)), this, SLOT(on_commitButton_clicked(int)));		// ä¸æ¨è
    
    
// é€šè¿‡qOverloadæ˜ç¡®å‚æ•°ç±»å‹
connect(ui->checkBox, &QCheckBox::clicked, this, qOverload<bool>(&Widget::do_click));
connect(ui->checkBox, &QCheckBox::clicked, this, qOverload<>(&Widget::do_click));


// disconnect
// 1.è§£é™¤ä¸€ä¸ªå‘å°„è€…æ‰€æœ‰ä¿¡å·çš„è¿æ¥
disconnect(myObject, nullptr, nullptr, nullptr);			// é™æ€å‡½æ•°å½¢å¼
myObject->disconnect();									//æˆå‘˜å‡½æ•°å½¢å¼
// 2.è§£é™¤ä¸ä¸€ä¸ªç‰¹å®šä¿¡å·çš„æ‰€æœ‰è¿æ¥
disconnect(myObject, SIGNAL(mySignal()), nullptr, nullptr);	// é™æ€å‡½æ•°å½¢å¼
myObject->disconnect(SIGNAL(mySignal()));					//æˆå‘˜å‡½æ•°å½¢å¼
// 3.è§£é™¤ä¸ä¸€ä¸ªç‰¹å®šæ¥æ”¶è€…çš„æ‰€æœ‰è¿æ¥
disconnect(myObject, nullptr, myReceiver, nullptr);			// é™æ€å‡½æ•°å½¢å¼
myObject->disconnect(myReceiver);						//æˆå‘˜å‡½æ•°å½¢å¼
// 4.è§£é™¤ç‰¹å®šçš„ä¸€ä¸ªä¿¡å·ä¸æ§½çš„è¿æ¥
disconnect(lineEdit, &QLineEdit::textChanged, label, &QLabel::setText);			// é™æ€å‡½æ•°å½¢å¼
```
## äº‹ä»¶
```cpp
// å½“äº‹ä»¶å‘ç”Ÿï¼ŒQtä¼šåˆ›å»ºä¸€ä¸ªeventå¯¹è±¡ä»£è¡¨å®ƒï¼Œå¹¶è°ƒç”¨QObjectçš„eventå‡½æ•°
// å¸¸è§äº‹ä»¶ï¼šQMouseEvent, QKeyEvent, QPaintEvent, QResizeEvent, QCloseEvent
// eventå‡½æ•°ä¼šè¿›è¡Œäº‹ä»¶çš„åˆ†å‘ï¼Œé€šè¿‡è°ƒç”¨ç›¸åº”çš„äº‹ä»¶å¤„ç†å‡½æ•°æ¥å¤„ç†ä¸åŒçš„äº‹ä»¶
// è‡ªå·±å‘é€äº‹ä»¶éœ€è¦åˆ›å»ºä¸€ä¸ªeventå¯¹è±¡ï¼Œå†é€šè¿‡QCoreApplication::sendEvent()å’ŒQCoreApplication::postEvent()æ¥å‘é€
// è¦æ‹¦æˆªç›¸åº”äº‹ä»¶ï¼Œéœ€è¦é‡å†™eventå‡½æ•°ï¼Œä¸‹é¢ä»£ç æ‹¦æˆªäº†é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
bool Widget::event(QEvent *event)
{
    if (event->type() == QEvent::MouseButtonPress)
    {
        qDebug() << "good";
        return true;
    }
    return QWidget::event(event);
}

// é‡è½½keyPressEvent
void Widget::keyPressEvent(QKeyEvent *event)
{
    if (event->key() == Qt::Key_Enter || event->key() == Qt::Key_Return) {
        qDebug() << "Pressed";
    }
    QWidget::keyPressEvent(event);
}

// é‡è½½paintEvent
void Widget::paintEvent(QPaintEvent *event)
{
    QPainter painter(this);
    
    QPen pen(QColor(255, 0, 0));
    pen.setWidth(1);
    
    QBrush brush(Qt::cyan);
    
    painter.setPen(pen);
    painter.setBrush(brush);
    painter.drawLine(QPoint(0, 0), QPoint(100, 100));
	
    // ä¿å­˜ç›®å‰è®¾ç½®
    painter.save();
    painter.setRenderHint(QPainter::Antialiasing);
    // è¿˜åŸè®¾ç½®
    painter.restore();
    
    // ç”»å›¾ç‰‡
    painter.drawPixmap(0, 0, QPixmap(":/ok.png"));
}
```
## è‡ªå®šä¹‰æ§ä»¶
```cpp
// task.h
#ifndef TASK_H
#define TASK_H

#include <QWidget>
#include <QLabel>
#include <QPushButton>
#include <QHBoxLayout>
#include <QCheckBox>
#include <QMouseEvent>
#include <QDockWidget>
#include <QMenu>
#include <QAction>

class Task : public QWidget
{
    Q_OBJECT
        public:
    explicit Task(QWidget *parent = nullptr);
    QAction *action;
    QLabel *label;

    signals:
    void actionSignal();

    protected:
    virtual void mousePressEvent(QMouseEvent *e) override;

    private:
    QCheckBox *checkBox;
    QPushButton *button;
    QMenu *contextMenu;
};

#endif // TASK_H

// task.cpp
#include "task.h"

Task::Task(QWidget *parent)
    : QWidget{parent}
{
    label = new QLabel("learning", this);
    checkBox = new QCheckBox(this);
    button = new QPushButton("åˆ é™¤", this);

    // æ·»åŠ ç»„ä»¶
    QHBoxLayout *layout = new QHBoxLayout(this);
    label->setAlignment(Qt::AlignCenter);
    layout->addWidget(label);
    layout->addWidget(checkBox);
    layout->addWidget(button);

    // è®¾ç½®å¸ƒå±€
    layout->setAlignment(label, Qt::AlignLeft);
    layout->setAlignment(checkBox, Qt::AlignRight);
    setLayout(layout);

    // è®¾ç½®ä¿¡å·ä¸æ§½
    connect(button, &QPushButton::clicked, [this](){delete this;});
}

void Task::mousePressEvent(QMouseEvent *event)
{
    QPoint pos = event->pos();
    QWidget *child = childAt(pos);

    // é¼ æ ‡å·¦å‡»ï¼Œè·³è½¬è¯¦æƒ…é¡µï¼›é¼ æ ‡å³å‡»ï¼Œè·³å‡ºèœå•
    if (child) {
        if (child->isWidgetType()) {
            if (qobject_cast<QLabel*>(child)) {
                if (event->button() == Qt::LeftButton) {
                    qDebug() << "left click";
                } else if (event->button() == Qt::RightButton) {
                    contextMenu = new QMenu(this);

                    // æ·»åŠ èœå•é¡¹
                    action = contextMenu->addAction("æˆä¸ºå½“å‰ä»»åŠ¡");
                    contextMenu->move(event->globalPos());
                    contextMenu->show();
                    connect(action, &QAction::triggered, this, &Task::actionSignal);
                }
            }
        }
    }
}
```
## QSS(Qt Style Sheet)
```cpp
// è¯­æ³•å’Œcssç›¸ä¼¼ï¼Œç»„ä»¶ä¹Ÿæ˜¯ç›’å­æ¨¡å‹ï¼Œå³paddingï¼Œborderï¼Œmargin
// å½“å’Œé™¤QSSè®¾ç½®çš„æ ·å¼å†²çªæ—¶ï¼Œä¼šä¼˜å…ˆä½¿ç”¨QSSï¼Œå³ä¿è¯QSSæ˜¯æœ‰æ•ˆçš„
// å…¨å±€ä½¿ç”¨
QFile file(":/style.qss");
file.open(QFile::ReadOnly);
QString styleSheet = QString::fromLatin1(file.readAll());
qApp.setStyleSheet(styleSheet);
// åº”ç”¨äºæŸä¸ªç»„ä»¶
button->setStyleSheet("color: red; background-color: white");
button->setStyleSheet("QPushButton { color: red; background-color: white }");

// é€‰ä¸­æ‰€æœ‰ç»„ä»¶
* { color: red; background-color: white }
// é€‰ä¸­çš„ç±»åŠå…¶å­ç±»éƒ½ä¼šç”Ÿæ•ˆï¼Œæ¯”å¦‚ç»§æ‰¿è‡ªQPushButtonçš„MyPushButtonä¹Ÿä¼šç”Ÿæ•ˆ
QPushButton { color: red; background-color: white }
// é€‰ä¸­colorå±æ€§ä¸ºredçš„QPushButtonç±»åŠå…¶å­ç±»
QPushButton[color="red"] { color: red; background-color: white }
// åªæœ‰é€‰ä¸­çš„ç±»ç”Ÿæ•ˆï¼Œå­ç±»ä¸å—å½±å“
.QPushButton { color: red; background-color: white }
// é€‰ä¸­å¯¹è±¡åä¸ºokButtonçš„ç»„ä»¶
#okButton { color: red; background-color: white }
// é€‰ä¸­å¯¹è±¡åä¸ºokButtonçš„QPushButton
QPushButton#okButton { color: red; background-color: white }
// é€‰ä¸­æ‰€æœ‰ä»å±äºQDialogçš„QPushButtonç±»çš„å®ä¾‹ï¼Œå³QDialogå¯¹è¯æ¡†é‡Œçš„æ‰€æœ‰QPushButtonæŒ‰é’®
QDialog QPushButton { color: red; background-color: white }
// æ‰€æœ‰ç›´æ¥ä»å±äºQDialogçš„QPushButtonç±»çš„å®ä¾‹
QDialog > QPushButton { color: red; background-color: white }
// å¯ä»¥åŒæ—¶é€‰ä¸­å¤šä¸ªé€‰æ‹©å™¨ï¼Œç”¨é€—å·éš”å¼€
QDialog,
QPushButton { color: red; background-color: white }

// é€‰ä¸­QSpinBoxç»„ä»¶çš„å‘ä¸Šï¼Œå‘ä¸‹æŒ‰é’®
QSpinBox::up-button { image: url(:/images/up.png) }
QSpinBox::down-button { image: url(:/images/down.png) }

// å¯ä»¥å¯¹çŠ¶æ€å–åï¼Œå³:!hover
QPushButton:hover { color: red }
QPushButton:!hover { color: red }
// çŠ¶æ€å¯ä»¥ä¸²è”ä½¿ç”¨
QPushButton:hover:checked { color: red }
// å­æ§ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨ä¼ªçŠ¶æ€
QCheckBox::indicator:checked { image: url(:/images/checked.png) }


// å±æ€§
QPushButton {
	color: blue;	// æ”¹å˜å­—ä½“é¢œè‰²
    color: #ff00ff;
    color: rgb(0, 0, 255);
    color: rgba(0, 0, 255, 0.2);
    color: rgba(0, 0, 255, 255);
    
	background-color: yellow;	// æ”¹å˜èƒŒæ™¯é¢œè‰²
    background-color: #ff00ff;
    background-color: rgb(0, 0, 255);
    background-color: rgba(0, 0, 255, 0.2);
    background-color: rgba(0, 0, 255, 255);
    
    background-image: url(:/image/one.png);
    background-position: center;
    background-repeat: repeat-y;
    background-repeat: no-repeat;
    
    border-top: 20px;
    border-right: 20px;
    border-bottom: 20px;
    border-left: 20px;
    border-top-color: red;
    border-color: red;
    border-radius: 4px;
    border-top-left-radius: 4px;
    border: none;
    border: transparent;
    border: 1px solid;
    border: 1px solid #696969;
    
    padding: 20px;
    
    font: 12pt "Times New Roman";
    font-family: "Times New Roman";
    font-size: 14px;
    text-align: center;
    
    width: 64px;
    height: 64px;
    min-width: 64px;
    min-height: 64px;
}
```
![](/images/qss_1.png)
![](/images/qss_2.png)
## å¸ƒå±€
```cpp
QVBoxLayout *todayLayout = new QVBoxLayout();
QLabel *todayLabel1 = new QLabel("learning");
QLabel *todayLabel2 = new QLabel("fucking");
todayLayout->addWidget(todayLabel1);
todayLayout->addWidget(todayLabel2);
todayLayout->setSpacing(0);
todayLayout->setContentsMargins(0, 0, 0, 0);
todayLayout->setAlignment(Qt::AlignHCenter);
todayLayout->setAlignment(Qt::AlignTop);
todayLayout->setAlignment(todayLabel1, Qt::AlignLeft);
```
## Jsonå¤„ç†
```cpp
// åˆ›å»ºä¸€ä¸ªJSONå¯¹è±¡
QJsonObject jsonObj;
jsonObj["name"] = "John";
jsonObj["age"] = 30;

// åˆ›å»ºä¸€ä¸ªJSONæ•°ç»„
QJsonArray jsonArr;
jsonArr.append("c++");
jsonArr.append("python");

// å°†æ•°ç»„æ·»åŠ åˆ°JSONå¯¹è±¡
jsonObj["programming languages"] = jsonArr;

// å°†JSONå¯¹è±¡æ·»åŠ åˆ°JSONå¯¹è±¡
QJsonObject jsonObj2;
obj2["today"] = "sunny";
obj2["tomorrow"] = "rainny";
jsonObj["obj2"] = obj2;

// å°†JSONå¯¹è±¡è½¬æ¢ä¸ºJSONæ–‡æ¡£
QJsonDocument jsonDoc(jsonObj);

// å°†JSONæ–‡æ¡£è½¬æ¢ä¸ºæ•°ç»„
QByteArray jsonData = jsonDoc.toJson(QJsonDocument::Indented);

// å°†Jsonæ•°æ®å†™å…¥æ–‡ä»¶
QFile file("D:\\json");
if (!file.open(QIODevice::WriteOnly)) {
    qDebug() << "Error";
}
file.write(jsonData);
file.close();

// ä»æ–‡ä»¶è¯»å…¥Jsonæ•°æ®
QFile file("D:\\json");
if (!file.open(QIODevice::ReadOnly)) {
    qDebug() << "Error";
}
QByteArray arr = file.readAll();
file.close();
QJsonDocument doc = QJsonDocument::fromJson(arr);
if (jsonDoc.isNull() || !jsonDoc.isObject()) {
    qDebug() << "Failed to parse JSON data.";
}
QJsonObject obj = doc.object();
QJsonValue value = obj["name"];
QString s = value.toString();
qDebug() << s;				// ç®€ä¾¿å†™æ³•qDebug() << QJsonDocument::fromJson(arr).object()["name"].toString();
```
## ç½‘ç»œ
```cpp
QNetworkAccessManager *manager = new QNetworkAccessManager(this);
connect(manager, &QNetworkAccessManager::finished, [](QNetworkReply *reply){
    if (reply->error() == QNetworkReply::NoError) {
        QByteArray responseData = reply->readAll();
        qDebug() << "Response:" << responseData;
    } else {
        qDebug() << "Error:" << reply->errorString();
    }
    reply->deleteLater();
});
QUrl url("https://baidu.com");
QNetworkRequest request(url);
manager->get(request);
```
## QFileæ“ä½œæ–‡ä»¶
```cpp
QFile file("D:\\qt");
file.open(QIODevice::ReadWrite);
file.write(responseData);
file.close();

file.open(QIODevice::ReadOnly);
QByteArray arr = file.readAll();
```
## æ•°æ®åº“
```cpp
// ç¤ºä¾‹
void Widget::deleteTask(QString title)
{
    // å°†QSqlDatabaseå’ŒQSqlQueryæ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸï¼Œç›®çš„æ˜¯è¿™æ ·è°ƒç”¨QSqlDatabase::removeDatabase()æ—¶ä¸ä¼šå‡ºé”™
    {
        QSqlDatabase todayDB = QSqlDatabase::addDatabase("QSQLITE", "today");
        todayDB.setDatabaseName("record.db");
        if (!todayDB.open()) {
            qDebug() << "Error: unalbe to open database";
            return;
        }

        QSqlQuery todayQuery(todayDB);
        todayQuery.prepare("DELETE FROM today WHERE title = ?");
        todayQuery.addBindValue(title);
        todayQuery.exec();
    }
    QSqlDatabase::removeDatabase("today");
}

// éœ€è¦å…ˆåˆ›å»ºè¿æ¥åœ¨æ‰“å¼€åæ‰å¯ä½¿ç”¨
QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE");
db.open();
// mysql
QSqlDatabase db = QSqlDatabase::addDatabase("QMYSQL");
db.setHostName("bigblue");
db.setDatabaseName("flightdb");
db.setUserName("acarlson");
db.setPassword("1uTbSbAs");
bool ok = db.open();
// å¦‚æœæ²¡æœ‰ç»™addDatabaseä¼ é€’ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™åˆ›å»ºçš„æ˜¯é»˜è®¤è¿æ¥ï¼Œä¸‹é¢åˆ›å»ºfirst, secondä¸¤æ¡è¿æ¥
QSqlDatabase firstDB = QSqlDatabase::addDatabase("QMYSQL", "first");
QSqlDatabase secondDB = QSqlDatabase::addDatabase("QMYSQL", "second");
firstDB.open();
secondDB.open();
// åˆ›å»ºè¿æ¥åå¯ä»¥é€šè¿‡databaseè·å¾—è¿æ¥ï¼Œä¸ä¼ é€’è¿æ¥åç§°ï¼Œåˆ™è¿”å›é»˜è®¤è¿æ¥
QSqlDatabase defaultDB = QSqlDatabase::database();
QSqlDatabase firstDB = QSqlDatabase::database("first");
// å…³é—­è¿æ¥
firstDB.close() 

// æ‰§è¡Œsqlè¯­å¥ï¼Œå¦‚æœæ„é€ å‡½æ•°æ²¡æœ‰ä¼ é€’å‚æ•°ï¼Œåˆ™ä½¿ç”¨çš„æ˜¯é»˜è®¤è¿æ¥
QSqlQuery query(firstDB);
QSqlQuery query;
query.exec("SELECT name, salary FROM employee WHERE salary > 50000");
while (query.next()) {
    QString name = query.value(0).toString();
    int salary = query.value(1).toInt();
    qDebug() << name << salary;
}
// æ’å…¥
query.exec("INSERT INTO employee (id, name, salary) "
           "VALUES (1001, 'Thad Beaumont', 65000)");
// ä½¿ç”¨å ä½ç¬¦æ’å…¥
query.prepare("INSERT INTO employee (id, name, salary) "
              "VALUES (?, ?, ?)");
query.addBindValue(1001);
query.addBindValue("Thad Beaumont");
query.addBindValue(65000);
query.exec();
// æ›´æ–°
query.exec("UPDATE employee SET salary = 70000 WHERE id = 1003");
// åˆ é™¤
query.exec("DELETE FROM employee WHERE id = 1007");
// QSqlQueryæ¯æ¬¡æä¾›å¯¹ç»“æœé›†ä¸€æ¡è®°å½•çš„è®¿é—®
while (query.next()) {
    QString name = query.value(0).toString();
    int salary = query.value(1).toInt();
    qDebug() << name << salary;
}
```
## QProcessæ‰“å¼€å…¶ä»–ç¨‹åº
```cpp
QProcess *myProcess = new QProcess(this);
myProcess->start(program);
```
## QObjectå®šæ—¶å™¨
```cpp
// å¯åŠ¨å®šæ—¶å™¨
timerid = this->startTimer(1000);
// éœ€è¦é‡å†™timerEventå‡½æ•°
virtual void timerEvent(QTimerEvent *event) override {
    if(event->timerId() == timerId) {				// ç”¨event->timerId()æ¥åˆ¤æ–­æ˜¯å“ªä¸ªå®šæ—¶å™¨
        this->killTimer(timerid);					// ç”¨killTimeræ¥å…³é—­å®šæ—¶å™¨
    }
}
```
## QTimerå®šæ—¶å™¨
```cpp
QTimer::singleShot(1000, []{qDebug() << "hello";});		// åªè§¦å‘ä¸€æ¬¡

QTimer timer;
timer.start();				// æ—¶é—´åˆ°äº†ä¼šå‘å‡ºä¿¡å·
connect(timer, &QTimer::timeout, this, &Widget::timeroutSlot);
timer.stop();

timer->setTimerType(Qt::CoarseTimer);
timer->setInterval(1000);
timer->setSingleShot(true);
timer->isSingleShot(true);
```
## QElapsedTimer
```cpp
QElapsedTimer timer;
timer.start();
int time = timer.elapsed();
```
## QPixmapä¿å­˜å›¾ç‰‡
```cpp
QPixmap pix("D:\\a.png");
```
## QFileDialogæ‰“å¼€èµ„æºç®¡ç†å™¨
```cpp
QString fileName = QFileDialog::getOpenFileName(this, "Open File", "C:\\home", "*.txt");
QString fileName = QFileDialog::getSaveFileName(this, "æ–‡ä»¶", QCoreApplication::applicationFilePath());
fileName.isEmpty();
```
## è®¾ç½®å‘½ä»¤è¡Œè¾“å‡ºçš„æ ¼å¼
```cpp
qSetMessagePattern();
// ä¸‹é¢çš„å¯èƒ½è¾“å‡º[     1.998] D: 
// å¯¹qDebug(), qInfo(), qWarning(), qCritical()å’ŒqFatal()ç”Ÿæ•ˆ
// %{time process}ä»£è¡¨è¿›ç¨‹å¯åŠ¨åç»è¿‡çš„æ—¶é—´
// %{if-debug}D%{endif}å¦‚æœè¾“å‡ºçš„ä¿¡æ¯ä¸ºdebugç±»å‹ï¼Œåˆ™è¾“å‡ºä¸­æœ‰Dï¼Œå¦åˆ™æ— D
// %{message}ä»£è¡¨è¾“å‡ºçš„ä¿¡æ¯
qSetMessagePattern("[%{time process}] %{if-debug}D%{endif}%{if-info}I%{endif}%{if-warning}W%{endif}%{if-critical}C%{endif}%{if-fatal}F%{endif}: %{message}");
```









## QTcpSocket
```cpp
QTcpSocket socket;
QString ip = "", port = "";
socket->connectToHost(QHostAddress(ip), port.toShort());
// è¿æ¥æˆåŠŸï¼Œä¼šå‘å‡ºä¿¡å·
connect(socket, &QTcpSocket::connected, [this](){});
// è¿æ¥æ–­å¼€ï¼Œä¼šå‘å‡ºä¿¡å·
connect(socket, QTcpSocket::disconnected, [this](){});
```
## QTcpServer
```cpp
QTcpServer server;
server.listen(QHostAddress::AnyIPv4, 8000);
// å®¢æˆ·ç«¯å‘èµ·è¿æ¥ï¼Œä¼šå‘å‡ºä¿¡å·
connect(server, &QTcpServer::newConnection, this, [](){
    // å»ºç«‹TCPè¿æ¥
    QTcpSocket *socket = server->nextPendingConnection();
    socket->peerAddress();
    socket->peerPort();
});
```
## QThreadçº¿ç¨‹
```cpp
myThread *t = new myThread;
t->start();			// éœ€è¦é‡å†™runå‡½æ•°
```
## QMenuBar
```cpp
// æœ€å¤šä¸€ä¸ª
QMenuBar *bar = new QMenuBar(this);
setMenuBar(bar);
QMenu *fileMenu = bar->addMenu("æ–‡ä»¶");
fileMenu->addAction("æ–°å»º");
fileMenu->addSeparator();
```
## QToolBar
```cpp
// å¯ä»¥æœ‰å¤šä¸ª
QToolBar *bar = new QToolBar(this);
addToolBar(bar);
```
## QStatusBar
```cpp
// æœ€å¤šä¸€ä¸ª
QStatusBar *bar = new QStatusBar(this);
setStatusBar(bar);
bar->addWidget(label);
```
## QDockWidget
```cpp
// å¯ä»¥æœ‰å¤šä¸ª
```
## QDialogå¯¹è¯æ¡†
```cpp
// æ¨¡æ€å¯¹è¯æ¡†ï¼Œæ‰“å¼€åä¸èƒ½å¯¹å…¶ä»–çª—å£è¿›è¡Œæ“ä½œ
QDialog d(this);
d.exec();
// éæ¨¡æ€å¯¹è¯æ¡†ï¼Œæ‰“å¼€åä¹Ÿèƒ½å¯¹å…¶ä»–çª—å£è¿›è¡Œæ“ä½œ
QDialog *d = new QDialog(this);
d.show();
d->setAttribute(Qt::WA_DeleteOnClose);
```
## QMessageBoxå¯¹è¯æ¡†
```cpp
// æœ‰å››ç§ç±»å‹ï¼Œåˆ†åˆ«ä¸ºé”™è¯¯ï¼Œä¿¡æ¯ï¼Œæé—®ï¼Œè­¦å‘Š
QMessageBox::about(this, "ok");
```
## QColorDialog::getColor()
## QFileDialog::getOpenFileName()
## QFontDialog::getFont()
## QPainterç»˜å›¾
```cpp
// éœ€è¦é‡å†™ç»˜å›¾äº‹ä»¶ paintEvent
QPainter *p = new QPainter(this);
p.setRenderHint(QPainter::Antialiasing);	// æŠ—é”¯é½¿
p.tranlate(100, 100);					  // ç§»åŠ¨åæ ‡ç³»
p.drawPixmap(x, y, QPixmap("D:\\a.png"));
p.drawPixmap(x, y, width, height, QPixmap("D:\\a.png"));
```
## QPen
## QBrush
## QPalette
```cpp
QPalette plet;
plet.setColor(QPalette::Text, Qt::blue);
```
## QFileInfo
## QFont
```cpp
QFont font;
font.setUnderline(true);
font.setItalic(true);
font.setBold(true);
font.setPointSize(20);
```
## QPlainTextEdit
## QProgressBar
```cpp
QProgressBar *bar = new QProgressBar();
bar->setValue(20);
bar->setTextVisible(true);
bar->setInvertedAppearance(true);
bar->setFormat("%p");
```
## QSlider
## QButtonGroupç”¨äºå•é€‰æŒ‰é’®
## QComboBox
```cpp
QComboBox *box;
box->addItem(QIcon().addFile("a.ico"), "hello");
box->clear();
box->setEditable();
box->currentText();
box->currentData().toString();
```
## æ‰“åŒ…æˆexe
```sh
windeployqt exeæ–‡ä»¶
éœ€è¦å…ˆæŠŠexeç§»åˆ°ä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ä¸‹ï¼Œè¿è¡Œå‘½ä»¤åä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆexeå¯åŠ¨æ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶
```
